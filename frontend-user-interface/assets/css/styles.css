/* Basic reset */
* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; color: #1f2937; }
body { display: flex; flex-direction: column; }

header { display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 1rem; border-bottom: 1px solid #e5e7eb; }
header h1 { margin: 0; font-size: 1.1rem; letter-spacing: 0.03em; }

.tabs { display: flex; gap: 0.5rem; }
.tabs button { background: #f3f4f6; border: 1px solid #e5e7eb; padding: 0.4rem 0.7rem; border-radius: 6px; cursor: pointer; }
.tabs button.active { background: #2563eb; color: #fff; border-color: #2563eb; }

main { flex: 1; position: relative; }
.tab { display: none; height: calc(100vh - 70px); overflow: auto; }
.tab.active { display: block; }

/* Viewer */
.viewer { display: grid; grid-template-columns: 1fr 300px; gap: 0.75rem; height: 100%; padding: 0.75rem; }
.image-container { background: #111827; border-radius: 8px; position: relative; overflow: hidden; }
.image-container img { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 100%; max-height: 100%; }
.sidebar { display: flex; flex-direction: column; gap: 0.75rem; }
.info { border: 1px solid #e5e7eb; border-radius: 8px; padding: 0.5rem; background: #fafafa; }
.controls { border: 1px solid #e5e7eb; border-radius: 8px; padding: 0.5rem; display: flex; flex-direction: column; gap: 0.5rem; }
.controls .row { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.controls button, .list-actions button { background: #f3f4f6; border: 1px solid #e5e7eb; padding: 0.4rem 0.6rem; border-radius: 6px; cursor: pointer; }
.controls button:hover, .list-actions button:hover { background: #e5e7eb; }

/* Map */
#map { height: calc(100% - 30px); margin: 0.75rem; border-radius: 8px; border: 1px solid #e5e7eb; }
.status { padding: 0.5rem 1rem; color: #111827; }

/* Lists */
.list-actions { display: flex; gap: 0.5rem; align-items: center; padding: 0.75rem; }
.list { list-style: none; padding: 0.5rem 0.75rem; margin: 0; display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 0.5rem; }
.list li { border: 1px solid #e5e7eb; border-radius: 8px; padding: 0.5rem; background: #fff; }
.list li h4 { margin: 0 0 0.25rem 0; }

/* Fullscreen overlay for image info */
.fs-overlay { position: absolute; top: 8px; left: 8px; max-width: 70%; background: rgba(0,0,0,0.55); color: #fff; padding: 6px 8px; border-radius: 6px; font-size: 12px; line-height: 1.3; display: none; box-shadow: 0 2px 6px rgba(0,0,0,0.3); }
.fs-overlay .title { font-weight: 600; }
.image-container:fullscreen .fs-overlay { display: block; font-size: 24px; }
/* Safari/WebKit prefixes for fullscreen */
.image-container:-webkit-full-screen .fs-overlay { display: block; font-size: 24px; }

/* Hover zoom for event thumbnails */
/* Quick zoom-out when leaving hover, slow progressive zoom-in while hovering */
.list li .ev-thumb img { transform: scale(1); transition: transform 180ms ease-out; will-change: transform; }
.list li:hover .ev-thumb img { transform: scale(1.18); transition: transform 1400ms ease-out; }

/* Hover edit button on event tiles */
.list li { position: relative; }
.ev-edit-btn { position: absolute; right: 8px; bottom: 8px; background: rgba(37,99,235,0.92); color: #fff; border: none; border-radius: 16px; padding: 4px 8px; font-size: 12px; cursor: pointer; opacity: 0; transform: translateY(4px); transition: opacity 160ms ease, transform 160ms ease; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
.list li:hover .ev-edit-btn { opacity: 1; transform: translateY(0); }
.ev-edit-btn:hover { background: #1d4ed8; }

/* Modal styles */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
.modal { width: min(900px, 96vw); max-height: 90vh; background: #fff; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.35); overflow: hidden; display: flex; flex-direction: column; }
.modal header { display: flex; align-items: center; justify-content: space-between; padding: 10px 14px; background: #f3f4f6; border-bottom: 1px solid #e5e7eb; }
.modal .content { padding: 12px 14px; overflow: auto; }
.modal footer { display: flex; gap: 8px; justify-content: flex-end; padding: 10px 14px; border-top: 1px solid #e5e7eb; background: #fafafa; }
.modal .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.modal label { display: block; font-size: 12px; color: #374151; margin-bottom: 4px; }
.modal input[type="text"], .modal textarea, .modal input[type="datetime-local"] { width: 100%; padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; background: #fff; }
.modal textarea { min-height: 70px; resize: vertical; }

/* Keywords chips */
.chips { display: flex; flex-wrap: wrap; gap: 6px; padding: 6px; border: 1px solid #e5e7eb; border-radius: 6px; background: #fff; }
.chip { display: inline-flex; align-items: center; gap: 6px; padding: 4px 8px; border-radius: 999px; font-size: 12px; color: #111827; background: #e0f2fe; }
.chip .remove { background: transparent; border: none; color: #0c4a6e; cursor: pointer; font-weight: 700; }
.chips input { flex: 1; min-width: 140px; border: none; outline: none; padding: 4px; }

/* Map container inside modal */
#event-edit-map { width: 100%; height: 300px; border: 1px solid #e5e7eb; border-radius: 8px; }
#media-edit-map { width: 100%; height: 300px; border: 1px solid #e5e7eb; border-radius: 8px; }

/* Responsive */
@media (max-width: 900px) {
  .viewer { grid-template-columns: 1fr; }
  .sidebar { order: -1; }
  .modal .row { grid-template-columns: 1fr; }
}
