# frontend user interface guidelines

## goals

- create a front end user interface for the SotoHP project
    - follow the available features in the OPENAPI REST API specification provided by this project
- overall look & feel
    - application title is `Sotohp`
    - create a SVG square logo inspired by the photos mosaic thematic
      - to be used as the favicon.svg
      - put the logo on the left of the application title
- organize features through tabs
- tasks related to tabs to implement
  - [x] image/media visualization tab named `Viewer`
    - maximize the space for the image
    - add a set of control buttons (on the right of the screen)
      - basic buttons (only display icons for all basic buttons, text when the mouse goes over the button) :
        - first
        - previous
        - next
        - last
        - random
        - fullscreen
        - play/pause (slideshow using the policy described by the choice button)
      - slideshow choices button : slide show delay choices to control how the slideshow should behave, seconds delay and what to do which is either take the next photo or a random new one
        - 5s random
        - 5s next
        - 10s random
        - 10s next
        - 20s random
        - 20s next
        - 30s random
        - 30s next
    - display image information (on the right of the screen below the buttons)
      - date
      - keywords
      - first event name
      - starred indicator :
        - yellow star (⭐) for starred
        - empty star (☆) for not starred
      - hasLocation indicator
        - green pin logo : when the location is known in the Original (true GPS position)
        - orange pin logo : when the location is deducted or user defined
        - red pin logo when : when the location is unknown
    - add mouse/keyboard shortcuts
      - Mouse behavior on the image
        - double-click on the image to toggle the full screen mode
        - single-click on the left zone of the image (1/4) to navigate to the previous image
        - single-click on the right to of the image (1/4) navigate to the next image
        - single-click on the "middle" to navigate to a new random image
      - Support some keyboards to navigate through images :
        - key `Home` : go to the first image
        - key `End` : go to the last one
        - key `PageDown`: go to the next one
        - key `PageUp`: got to the previous one
    - when the image is in full screen mode
      - use a background semi-transparent color for the added text to make it always visible
      - show the event information on the top left of the image
      - show the starred and hasLocation indicators
    - a Click on the has location indicator when location is known whould switch to the world (openstreetmap) zoomable tab
      - with the zoom level set to the location of the photo
    - remember the currently displayed image in the viewer on page reload
  - [x] world (openstreetmap) zoomable tab
    - use zoom-in and zoom-out to see the photo distribution all other the world
    - use a clustered approach as thousands of photos can be displayed
      - filter media that has a known location ignore all others
    - when a photo is selected, popup an information zone with
      - photo information (date, first event name, starred indicator)
      - the photo itself in a reduced format
      - a button to switch back to the visualization zone
  - [ ] events management tab
    - list events using tiles, hide event id, show the timestamp
      - sorted by the timestamp in reverse order (newest first)
      - include media normalized image inside each event tile (use the new API which allow to get media access key from an originalId)
      - when click on a tile, display the event associated originalId/mediaAccessKey in the image viewer 
      - add a small image zooming effect when mouse goes hover tiles
        - when leaving a zoomed event, add a quick zoom out effect
    - take care to performance as it may requires a lot of queries :
      - Decrease the number of simultaneous requests made to retrieve mediaAccessKey and miniatures from the originalId associated to each event.
        Right now it generates "ERR_INSUFFICIENT_RESOURCES"
      - use lazy loading to load only the tiles images are near to be visible on the screen
    - on mouse hover an event show a small edit button on the bottom right
      - popup an edit form when clicked
        - using regular text fields for `name` and `description`
        - for the timestamp use a date picker
        - for keywords use colored labels with `x` buttons to easily remove any keyword, enter some text to change it into a colored label
        - for the location use a map with a marker to select/update the location
      - when clicking on the save button close the form and refresh the event list
    - wire other operations available in the API
  - [ ] owners management tab
    - list owners
    - wire other operations available in the API
  - [ ] stores management tab
    - list stores
    - wire other operations available in the API
    - when creating a new store, choose the owner between already available owners
  - [ ] settings tab
    - add a synchronize button to force the synchronization of all defined stores

## coding choices

- all backend features are served by the already provided OpenAPI backend
  - download the OpenAPI spec from `http://127.0.0.1:8080/docs/docs.yaml` using `curl`
  - the backend implements the openapi through the `/api` relative path
  - the backend serves all assets (images, css, js, svg) through the `/assets` relative path
  - the backend provides routing fallbacks to `/ui/` (with the same `index.html` content) for all other paths dedicated to the front end user interface
- ONLY LOOK TO THE API SPECS TO DESIGN THE FRONT END USER INTERFACE
    - ignore all the scala code, do not modify any scala files when working on the front end user interface
    - if something is missing ask me
- all the source files are in the `frontend-user-interface` folder`
- build the front end user interface sources into the `frontend-user-interface-dist` folder
- use **typescript** programming language associated and those kind of libraries/frameworks
  - angular framework
  - axios openapi client
- use the global makefile to build the front end user interface sources
